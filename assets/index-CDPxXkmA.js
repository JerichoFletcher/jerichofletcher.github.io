var Rt=t=>{throw TypeError(t)};var Pt=(t,e,r)=>e.has(t)||Rt("Cannot "+r);var i=(t,e,r)=>(Pt(t,e,"read from private field"),r?r.call(t):e.get(t)),f=(t,e,r)=>e.has(t)?Rt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),c=(t,e,r,s)=>(Pt(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();var Xt=`#version 100
precision mediump float;

attribute vec3 a_position;
attribute vec3 a_color;
attribute vec2 a_uv;

varying vec3 v_color;
varying vec2 v_uv;

uniform mat4 u_world;
uniform mat4 u_view;
uniform mat4 u_proj;

void main(){
  v_color = a_color;
  v_uv = a_uv;
  gl_Position = u_proj * u_view * u_world * vec4(a_position, 1.0);
}`,jt=`#version 100
precision mediump float;

varying vec3 v_color;
varying vec2 v_uv;

uniform sampler2D u_texture;

void main(){
  vec4 texColor = texture2D(u_texture, v_uv);
  gl_FragColor = vec4(v_color, 1.0) * texColor;
}`;const ht="OES_vertex_array_object",ft="ANGLE_instanced_arrays";var X=(t=>(t[t.WebGL1=0]="WebGL1",t[t.WebGL2=1]="WebGL2",t))(X||{}),rt,F;class Ht{constructor(e){f(this,rt);f(this,F);c(this,rt,e),c(this,F,new Map),e.version===0?(this.setExtension(ht,this.retrieveExtension(e.gl,ht)),this.setExtension(ft,this.retrieveExtension(e.gl,ft))):(this.setExtension(ht,e.gl),this.setExtension(ft,e.gl))}retrieveExtension(e,r){const s=e.getExtension(r);if(!s)return null;const n=r.split("_",1)[0],o=Object.getPrototypeOf(s);return{...Object.fromEntries(Object.entries(o).map(([l,h])=>[l.replace(new RegExp(`_?${n}$`,"i"),""),typeof h=="function"?this.callWithContext(s,h):h])),isExtension:!0}}callWithContext(e,r){return(...s)=>r.call(e,...s)}getExtension(e){if(!i(this,F).has(e))throw new Error(`Missing WebGL extension: ${e}`);return i(this,F).get(e)}setExtension(e,r){r?i(this,F).set(e,r):i(this,F).delete(e)}get context(){return i(this,rt)}get loadedExtensions(){return new Map([...i(this,F).entries()].filter(([,e])=>e.isExtension))}get vertexArray(){return this.getExtension(ht)}get instancedArrays(){return this.getExtension(ft)}}rt=new WeakMap,F=new WeakMap;var nt,ot;const tt=class tt{constructor(e){f(this,nt);f(this,ot);c(this,nt,e),c(this,ot,new Ht(e))}static latest(e){const r=e.getContext("webgl2");if(r)return new tt({version:X.WebGL2,gl:r});const s=e.getContext("webgl");if(s)return new tt({version:X.WebGL1,gl:s});throw new Error("Failed to create WebGL wrapper: WebGL not supported")}static ofVersion(e,r){let s;switch(r){case X.WebGL1:s=e.getContext("webgl");break;case X.WebGL2:s=e.getContext("webgl2");break}if(!s)throw new Error("Failed to create WebGL wrapper: Version not supported");return new tt({version:r,gl:s})}get context(){return i(this,nt)}get funcs(){return i(this,ot)}};nt=new WeakMap,ot=new WeakMap;let xt=tt;var j,it,H;const mt=class mt{constructor(e,r,s){f(this,j);f(this,it);f(this,H);c(this,j,e),c(this,it,r),c(this,H,s)}static validBeforeDisposed(e,r){return new mt(e,0,r)}static validAfterDisposed(e,r){return new mt(e,1,r)}executeWhenValid(e){switch(i(this,it)){case 0:if(i(this,j).isDisposed)throw new Error("Invalid state: Already disposed");return e();case 1:if(!i(this,j).isDisposed)throw new Error("Invalid state: Not disposed");return e()}}get value(){return this.executeWhenValid(()=>i(this,H))}set value(e){this.executeWhenValid(()=>c(this,H,e))}};j=new WeakMap,it=new WeakMap,H=new WeakMap;let G=mt;var wt=(t=>(t[t.Array=34962]="Array",t[t.Element=34963]="Element",t))(wt||{}),vt=(t=>(t[t.Stream=35040]="Stream",t[t.Static=35044]="Static",t[t.Dynamic=35048]="Dynamic",t))(vt||{}),w=(t=>(t[t.Byte=5120]="Byte",t[t.UByte=5121]="UByte",t[t.Short=5122]="Short",t[t.UShort=5123]="UShort",t[t.Int=5124]="Int",t[t.UInt=5125]="UInt",t[t.Float=5126]="Float",t[t.Bool=35670]="Bool",t))(w||{}),a=(t=>(t[t.Float2=35664]="Float2",t[t.Float3=35665]="Float3",t[t.Float4=35666]="Float4",t[t.Int2=35667]="Int2",t[t.Int3=35668]="Int3",t[t.Int4=35669]="Int4",t[t.Bool2=35671]="Bool2",t[t.Bool3=35672]="Bool3",t[t.Bool4=35673]="Bool4",t))(a||{}),x=(t=>(t[t.FloatM2=35674]="FloatM2",t[t.FloatM3=35675]="FloatM3",t[t.FloatM4=35676]="FloatM4",t))(x||{}),et=(t=>(t[t.Sampler2D=35678]="Sampler2D",t[t.SamplerCube=35680]="SamplerCube",t))(et||{}),Wt=(t=>(t[t.Points=0]="Points",t[t.Lines=1]="Lines",t[t.LineLoop=2]="LineLoop",t[t.LineStrip=3]="LineStrip",t[t.Triangles=4]="Triangles",t[t.TriangleStrip=5]="TriangleStrip",t[t.TriangleFan=6]="TriangleFan",t))(Wt||{}),yt=(t=>(t[t.Fragment=35632]="Fragment",t[t.Vertex=35633]="Vertex",t))(yt||{}),_t=(t=>(t[t.Repeat=10497]="Repeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.MirroredRepeat=33648]="MirroredRepeat",t))(_t||{}),Tt=(t=>(t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.NearestMipmapNearest=9984]="NearestMipmapNearest",t[t.LinearMipmapNearest=9985]="LinearMipmapNearest",t[t.NearestMipmapLinear=9986]="NearestMipmapLinear",t[t.LinearMipmapLinear=9987]="LinearMipmapLinear",t))(Tt||{}),Ct=(t=>(t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t))(Ct||{});function Yt(t){switch(t){case a.Float2:case a.Int2:case a.Bool2:return 2;case a.Float3:case a.Int3:case a.Bool3:return 3;case a.Float4:case a.Int4:case a.Bool4:case x.FloatM2:return 4;case x.FloatM3:return 9;case x.FloatM4:return 16;default:if(t in w||t in et)return 1;throw new Error(`Unknown GL type: ${t}`)}}function zt(t){switch(t){case a.Float2:case a.Float3:case a.Float4:case x.FloatM2:case x.FloatM3:case x.FloatM4:return w.Float;case a.Bool2:case a.Bool3:case a.Bool4:return w.Bool;case a.Int2:case a.Int3:case a.Int4:return w.Int;default:if(t in w||t in et)return t;throw new Error(`Unknown GL type: ${t}`)}}function Ot(t){const e=Yt(t.type);return{name:t.name,size:t.size,type:t.type,elementSize:e}}function qt(t,e){const r=zt(t.type);return{...Ot(t),elementType:r,location:e}}function Kt(t,e){const r=zt(t.type);if(r in w){const s=r;return{...Ot(t),elementType:s,location:e}}throw new Error(`Invalid attribute GL type ${r}`)}function O(t,e){try{for(const r of t)r.bind();return e()}finally{for(let r=t.length-1;r>=0;r--)t[r].unbind()}}var $,p,N,R;const At=class At{constructor(e,r){f(this,$);f(this,p);f(this,N);f(this,R);c(this,p,e);const s=i(this,p).context.gl;if(r<0||s.TEXTURE31-s.TEXTURE0<r)throw new Error(`Texture unit ${r} is out of range`);const n=e.context.gl.createTexture();if(!n){const o=e.context.gl.getError();throw new Error(`Failed to create texture object (error code: ${o})`)}c(this,N,G.validBeforeDisposed(this,n)),c(this,R,r),c(this,$,!1)}static create(e,r){return new At(e,r)}setData(e,r,s,n,o,l){this.bind();const h=i(this,p).context.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,1),e instanceof HTMLImageElement?h.texImage2D(h.TEXTURE_2D,0,s,r,n,e):h.texImage2D(h.TEXTURE_2D,0,s,o,l,0,r,n,e)}setMinFilter(e){this.bind();const r=i(this,p).context.gl;r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,e)}setMagFilter(e){this.bind();const r=i(this,p).context.gl;r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e)}setFilter(e,r){this.setMinFilter(e),this.setMagFilter(r)}setTextureWrapS(e){this.bind();const r=i(this,p).context.gl;r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e)}setTextureWrapT(e){this.bind();const r=i(this,p).context.gl;r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e)}setTextureWrap(e,r){this.setTextureWrapS(e),this.setTextureWrapT(r)}bind(){const e=i(this,p).context.gl;e.activeTexture(e.TEXTURE0+i(this,R)),e.bindTexture(e.TEXTURE_2D,i(this,N).value)}unbind(){const e=i(this,p).context.gl;e.activeTexture(e.TEXTURE0+i(this,R)),e.bindTexture(e.TEXTURE_2D,null)}generateMipmap(){this.bind(),i(this,p).context.gl.generateMipmap(i(this,p).context.gl.TEXTURE_2D)}get contextWrapper(){return i(this,p)}get texture(){return i(this,N).value}get textureUnit(){return i(this,R)}get isDisposed(){return i(this,$)}dispose(){i(this,$)||(i(this,p).context.gl.deleteTexture(i(this,N).value),c(this,$,!0))}};$=new WeakMap,p=new WeakMap,N=new WeakMap,R=new WeakMap;let ut=At;function Gt(t,e){return Array.isArray(t)&&t.every(e)}function Et(t){return Gt(t,e=>typeof e=="number")}function Zt(t){return Gt(t,e=>typeof e=="boolean")}var P,Y,st,q;const It=class It{constructor(e,r,s){f(this,P);f(this,Y);f(this,st);f(this,q);c(this,Y,e),c(this,st,r);const n=e.context.gl,o=n.createShader(r);if(!o){const l=n.getError();throw new Error(`Failed to create shader (error code ${l})`)}if(n.shaderSource(o,s),n.compileShader(o),!n.getShaderParameter(o,n.COMPILE_STATUS)){const l=n.getError(),h=n.getShaderInfoLog(o);throw n.deleteShader(o),new Error(`Failed to compile shader (error code: ${l}): ${h}`)}c(this,q,G.validBeforeDisposed(this,o)),c(this,P,!1)}static create(e,r,s){return new It(e,r,s)}get contextWrapper(){return i(this,Y)}get type(){return i(this,st)}get shader(){return i(this,q).value}get isDisposed(){return i(this,P)}dispose(){i(this,P)||(i(this,Y).context.gl.deleteShader(i(this,q).value),c(this,P,!0))}};P=new WeakMap,Y=new WeakMap,st=new WeakMap,q=new WeakMap;let dt=It;var M,v,L,K,Z,B,J;const St=class St{constructor(e,r,s){f(this,M);f(this,v);f(this,L);f(this,K);f(this,Z);f(this,B);f(this,J);c(this,v,e);const n=e.context.gl,o=n.createProgram();if(!o){const u=n.getError();throw new Error(`Failed to create program (error code ${u})`)}if(n.attachShader(o,r.shader),n.attachShader(o,s.shader),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS)){const u=n.getError(),d=n.getProgramInfoLog(o);throw n.deleteProgram(o),new Error(`Failed to link program (error code: ${u}): ${d}`)}c(this,B,new Map),c(this,J,new Map);const l=n.getProgramParameter(o,n.ACTIVE_UNIFORMS);for(let u=0;u<l;u++){const d=n.getActiveUniform(o,u),g=n.getUniformLocation(o,d.name);i(this,B).set(d.name,qt(d,g))}const h=n.getProgramParameter(o,n.ACTIVE_ATTRIBUTES);for(let u=0;u<h;u++){const d=n.getActiveAttrib(o,u),g=n.getAttribLocation(o,d.name);i(this,J).set(d.name,Kt(d,g))}c(this,L,G.validBeforeDisposed(this,o)),c(this,K,r),c(this,Z,s),c(this,M,!1)}static create(e,r,s){return new St(e,r,s)}bind(){i(this,v).context.gl.useProgram(i(this,L).value)}unbind(){i(this,v).context.gl.useProgram(null)}setUniform(e,r){O([this],()=>{const s=i(this,v).context.gl,n=i(this,B).get(e);if(!n)throw new Error(`Unknown uniform: ${e}`);switch(n.type){case w.Bool:if(typeof r!="boolean")throw new Error(`Wrong data type for uniform ${e}; expected boolean, found ${typeof r}`);s.uniform1i(n.location,r?1:0);break;case w.Byte:case w.UByte:case w.Short:case w.UShort:case w.Int:case w.UInt:if(typeof r!="number")throw new Error(`Wrong data type for uniform ${e}; expected number, found ${typeof r}`);s.uniform1i(n.location,r);break;case w.Float:if(typeof r!="number")throw new Error(`Wrong data type for uniform ${e}; expected number, found ${typeof r}`);s.uniform1f(n.location,r);break;case a.Float2:case a.Float3:case a.Float4:if(!Et(r)&&!(r instanceof Float32Array))throw new Error(`Wrong data type for uniform ${e}; expected number[] | Float32Array, found ${typeof r}`);{let o;switch(n.type){case a.Float2:o=2;break;case a.Float3:o=3;break;case a.Float4:o=4;break}if(r.length!==o)throw new Error(`Wrong data size for uniform ${e}; expected ${o}, found ${r.length}`);switch(n.type){case a.Float2:s.uniform2fv(n.location,r);break;case a.Float3:s.uniform3fv(n.location,r);break;case a.Float4:s.uniform4fv(n.location,r);break}}break;case a.Int2:case a.Int3:case a.Int4:if(!Et(r)||!(r instanceof Int32Array||r instanceof Uint32Array))throw new Error(`Wrong data type for uniform ${e}; expected number[] | Float32Array, found ${typeof r}`);{let o;switch(n.type){case a.Int2:o=2;break;case a.Int3:o=3;break;case a.Int4:o=4;break}if(r.length!==o)throw new Error(`Wrong data size for uniform ${e}; expected ${o}, found ${r.length}`);switch(n.type){case a.Int2:s.uniform2iv(n.location,r);break;case a.Int3:s.uniform3iv(n.location,r);break;case a.Int4:s.uniform4iv(n.location,r);break}}break;case a.Bool2:case a.Bool3:case a.Bool4:if(!Zt(r)||!(r instanceof Uint8Array))throw new Error(`Wrong data type for uniform ${e}; expected boolean[] | Uint8Array, found ${typeof r}`);{let o;switch(n.type){case a.Bool2:o=2;break;case a.Bool3:o=3;break;case a.Bool4:o=4;break}if(r.length!==o)throw new Error(`Wrong data size for uniform ${e}; expected ${o}, found ${r.length}`);switch(n.type){case a.Bool2:s.uniform2iv(n.location,r);break;case a.Bool3:s.uniform3iv(n.location,r);break;case a.Bool4:s.uniform4iv(n.location,r);break}}break;case x.FloatM2:case x.FloatM3:case x.FloatM4:if(!Et(r)&&!(r instanceof Float32Array))throw new Error(`Wrong data type for uniform ${e}; expected number[] | Float32Array, found ${typeof r}`);{let o;switch(n.type){case x.FloatM2:o=4;break;case x.FloatM3:o=9;break;case x.FloatM4:o=16;break}if(r.length!==o)throw new Error(`Wrong data size for uniform ${e}; expected ${o}, found ${r.length}`);switch(n.type){case x.FloatM2:s.uniformMatrix2fv(n.location,!1,r);break;case x.FloatM3:s.uniformMatrix3fv(n.location,!1,r);break;case x.FloatM4:s.uniformMatrix4fv(n.location,!1,r);break}}break;case et.Sampler2D:if(!(r instanceof ut))throw new Error(`Wrong data type for uniform ${e}; expected GlTexture, found ${typeof r}`);r.bind(),s.uniform1i(n.location,r.textureUnit);break;case et.SamplerCube:throw new Error("Sampler cube uniform not implemented")}})}setUniformTexture(e,r){const s=i(this,v).context.gl,n=i(this,B).get(e);if(!n)throw new Error(`Unknown uniform: ${e}`);r.bind(),s.uniform1i(n.location,r.textureUnit)}get contextWrapper(){return i(this,v)}get program(){return i(this,L).value}get vertexShader(){return i(this,K)}get fragmentShader(){return i(this,Z)}get uniforms(){return i(this,B)}get attributes(){return i(this,J)}get isDisposed(){return i(this,M)}dispose(){i(this,M)||(i(this,v).context.gl.detachShader(i(this,L).value,i(this,K).shader),i(this,v).context.gl.detachShader(i(this,L).value,i(this,Z).shader),i(this,v).context.gl.deleteProgram(i(this,L).value),c(this,M,!0))}};M=new WeakMap,v=new WeakMap,L=new WeakMap,K=new WeakMap,Z=new WeakMap,B=new WeakMap,J=new WeakMap;let Ft=St;var k,A,U,at,W;const Bt=class Bt{constructor(e,r,s){f(this,k);f(this,A);f(this,U);f(this,at);f(this,W);c(this,A,e),c(this,U,r),c(this,at,s);const n=e.context.gl.createBuffer();if(!n){const o=e.context.gl.getError();throw new Error(`Failed to create buffer object (error code: ${o})`)}c(this,W,G.validBeforeDisposed(this,n)),c(this,k,!1)}static create(e,r,s,n){const o=new Bt(e,r,s);return n&&o.setData(n),o}bind(){const e=i(this,W).value;i(this,A).context.gl.bindBuffer(i(this,U),e)}unbind(){i(this,A).context.gl.bindBuffer(i(this,U),null)}setData(e){O([this],()=>i(this,A).context.gl.bufferData(i(this,U),e,i(this,at)))}get contextWrapper(){return i(this,A)}get type(){return i(this,U)}get buffer(){return i(this,W).value}get isDisposed(){return i(this,k)}dispose(){i(this,k)||(i(this,A).context.gl.deleteBuffer(i(this,W).value),c(this,k,!0))}};k=new WeakMap,A=new WeakMap,U=new WeakMap,at=new WeakMap,W=new WeakMap;let gt=Bt;var T,_,C;const Ut=class Ut{constructor(e){f(this,T);f(this,_);f(this,C);c(this,_,e);const r=e.funcs.vertexArray.createVertexArray();if(!r){const s=e.context.gl.getError();throw new Error(`Failed to create VAO (error code ${s})`)}c(this,C,G.validBeforeDisposed(this,r)),c(this,T,!1)}static create(e){return new Ut(e)}bind(){i(this,_).funcs.vertexArray.bindVertexArray(i(this,C).value)}unbind(){i(this,_).funcs.vertexArray.bindVertexArray(null)}setAttribute(e,r,s,n,o,l,h){O([this,r],()=>{const u=i(this,_).context.gl;u.enableVertexAttribArray(e),u.vertexAttribPointer(e,s,n,o,l,h)})}bindElementBuffer(e){O([this],()=>e.bind()),e.unbind()}drawElements(e,r,s,n,o){O([e,this],()=>i(this,_).context.gl.drawElements(r,s,n,o))}get contextWrapper(){return i(this,_)}get vao(){return i(this,C).value}get isDisposed(){return i(this,T)}dispose(){i(this,T)||(i(this,_).funcs.vertexArray.deleteVertexArray(i(this,C).value),c(this,T,!0))}};T=new WeakMap,_=new WeakMap,C=new WeakMap;let Lt=Ut;var bt=1e-6,Mt=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function pt(){var t=new Mt(16);return Mt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Jt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Qt(t,e,r){var s=Math.sin(r),n=Math.cos(r),o=e[0],l=e[1],h=e[2],u=e[3],d=e[4],g=e[5],E=e[6],b=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+d*s,t[1]=l*n+g*s,t[2]=h*n+E*s,t[3]=u*n+b*s,t[4]=d*n-o*s,t[5]=g*n-l*s,t[6]=E*n-h*s,t[7]=b*n-u*s,t}function Vt(t,e,r,s,n,o,l){var h=1/(e-r),u=1/(s-n),d=1/(o-l);return t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(e+r)*h,t[13]=(n+s)*u,t[14]=(l+o)*d,t[15]=1,t}var kt=Vt;function Dt(t,e,r,s){var n,o,l,h,u,d,g,E,b,m,I=e[0],y=e[1],S=e[2],Q=s[0],V=s[1],lt=s[2],D=r[0],$t=r[1],Nt=r[2];return Math.abs(I-D)<bt&&Math.abs(y-$t)<bt&&Math.abs(S-Nt)<bt?Jt(t):(g=I-D,E=y-$t,b=S-Nt,m=1/Math.hypot(g,E,b),g*=m,E*=m,b*=m,n=V*b-lt*E,o=lt*g-Q*b,l=Q*E-V*g,m=Math.hypot(n,o,l),m?(m=1/m,n*=m,o*=m,l*=m):(n=0,o=0,l=0),h=E*l-b*o,u=b*n-g*l,d=g*o-E*n,m=Math.hypot(h,u,d),m?(m=1/m,h*=m,u*=m,d*=m):(h=0,u=0,d=0),t[0]=n,t[1]=h,t[2]=g,t[3]=0,t[4]=o,t[5]=u,t[6]=E,t[7]=0,t[8]=l,t[9]=d,t[10]=b,t[11]=0,t[12]=-(n*I+o*y+l*S),t[13]=-(h*I+u*y+d*S),t[14]=-(g*I+E*y+b*S),t[15]=1,t)}var ct,z;class te{constructor(e){f(this,ct);f(this,z);c(this,ct,e),c(this,z,new Map)}setAttribute(...e){for(const r of e)i(this,z).set(r.attribName,r)}configure(e,r){for(const s of r.attributes.values()){const n=i(this,z).get(s.name);if(!n)throw new Error(`Attribute ${s.name} not defined by the layout`);e.setAttribute(s.location,n.targetBuffer,s.elementSize,s.elementType,n.normalized??!1,n.stride,n.offset)}}get contextWrapper(){return i(this,ct)}get configs(){return i(this,z)}}ct=new WeakMap,z=new WeakMap;function ee(t){const e=xt.ofVersion(t,X.WebGL1),r=e.context.gl,s=()=>{let n=!1;const o=t.clientWidth,l=t.clientHeight;(t.width!==o||t.height!==l)&&(t.width=o,t.height=l,n=!0),n&&r.viewport(0,0,t.width,t.height)};return window.addEventListener("resize",s),s(),console.log("Loaded WebGL version:",r.getParameter(r.VERSION)),console.log("Loaded extensions:",[...e.funcs.loadedExtensions.keys()]),e}function re(t){const e=t.context.gl,r=dt.create(t,yt.Vertex,Xt),s=dt.create(t,yt.Fragment,jt),n=Ft.create(t,r,s),o=new Float32Array([-.5,.5,0,1,1,1,0,0,.5,.5,0,1,1,1,1,0,.5,-.5,0,1,1,1,1,1,-.5,-.5,0,1,1,1,0,1]),l=new Int16Array([0,1,2,0,2,3]),h=gt.create(t,wt.Array,vt.Static,o),u=gt.create(t,wt.Element,vt.Static,l),d=new te(t);d.setAttribute({attribName:"a_position",targetBuffer:h,stride:8*o.BYTES_PER_ELEMENT,offset:0*o.BYTES_PER_ELEMENT},{attribName:"a_color",targetBuffer:h,stride:8*o.BYTES_PER_ELEMENT,offset:3*o.BYTES_PER_ELEMENT},{attribName:"a_uv",targetBuffer:h,stride:8*o.BYTES_PER_ELEMENT,offset:6*o.BYTES_PER_ELEMENT});const g=Lt.create(t);d.configure(g,n),g.bindElementBuffer(u);let E=e.canvas.width/e.canvas.height;const b=pt(),m=Dt(pt(),[0,0,1],[0,0,0],[0,1,0]),I=kt(pt(),-E,E,-1,1,0,1e3),y=ut.create(t,0);y.setFilter(Tt.Nearest,Ct.Nearest),y.setTextureWrap(_t.ClampToEdge,_t.ClampToEdge),y.setData(new Uint8Array([63,63,0,127,63,0,191,63,0,255,63,0,63,127,0,127,127,0,191,127,0,255,127,0,63,191,0,127,191,0,191,191,0,255,191,0,63,255,0,127,255,0,191,255,0,255,255,0]),e.RGB,e.RGB,e.UNSIGNED_BYTE,4,4),O([n],()=>{n.setUniform("u_world",b),n.setUniform("u_view",m),n.setUniform("u_proj",I),n.setUniform("u_texture",y)});let S=0;function Q(V){e.clear(e.COLOR_BUFFER_BIT),O([n],()=>{const lt=S-V;n.setUniform("u_world",Qt(b,b,lt*Math.PI/5e3));const D=e.canvas.width/e.canvas.height;E!==D&&(E=D,n.setUniform("u_proj",kt(I,-E,E,-1,1,0,1e3))),g.drawElements(n,Wt.TriangleFan,l.length,w.UShort,0)}),S=V,requestAnimationFrame(Q)}requestAnimationFrame(Q)}function ne(){const t=document.getElementById("cnv"),e=ee(t);re(e)}ne();
